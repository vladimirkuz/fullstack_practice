(this["webpackJsonpx-press-publishing"]=this["webpackJsonpx-press-publishing"]||[]).push([[0],{197:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),i=s(91),r=s.n(i),u=s(16),c=s(17),o=s(19),l=s(18),d=s(20),h=s(201),m=s(199),p=s(200),f=s(5),v=s(202),S=s(9),N=s.n(S),y=(s(190),{}),b="http://localhost:4000/api";y.getSeries=function(){var e="".concat(b,"/series");return fetch(e).then((function(e){return e.ok?e.json().then((function(e){return e.series.map((function(e){return N()(e)}))})):new Promise((function(e){return e([])}))}))},y.createSeries=function(e){var t="".concat(b,"/series"),s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({series:e})};return fetch(t,s).then((function(e){return e.ok?e.json().then((function(e){return N()(e.series)})):new Promise((function(e){return e(null)}))}))},y.updateSeries=function(e){var t="".concat(b,"/series/").concat(e.id),s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({series:e})};return fetch(t,s).then((function(e){return e.ok?e.json().then((function(e){return N()(e.series)})):new Promise((function(e){return e(null)}))}))},y.deleteSeries=function(e){var t="".concat(b,"/series/").concat(e);return fetch(t,{method:"DELETE"})},y.getArtists=function(){var e="".concat(b,"/artists");return fetch(e).then((function(e){return e.ok?e.json().then((function(e){return e.artists.map((function(e){return N()(e)}))})):new Promise((function(e){return e([])}))}))},y.getArtist=function(e){var t="".concat(b,"/artists/").concat(e);return fetch(t).then((function(e){return e.ok?e.json().then((function(e){return N()(e.artist)})):new Promise((function(e){return e(null)}))}))},y.createArtist=function(e){var t="".concat(b,"/artists"),s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({artist:e})};return fetch(t,s).then((function(e){return e.ok?e.json().then((function(e){return N()(e.artist)})):new Promise((function(e){return e(null)}))}))},y.updateArtist=function(e){var t="".concat(b,"/artists/").concat(e.id),s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({artist:e})};return fetch(t,s).then((function(e){return e.ok?e.json().then((function(e){return N()(e.artist)})):new Promise((function(e){return e(null)}))}))},y.restoreArtist=function(e){e.isCurrentlyEmployed=1;var t="".concat(b,"/artists/").concat(e.id),s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({artist:e})};return fetch(t,s).then((function(e){return e.ok?e.json().then((function(e){return N()(e.artist)})):new Promise((function(e){return e(null)}))}))},y.deleteArtist=function(e){var t="".concat(b,"/artists/").concat(e);return fetch(t,{method:"DELETE"}).then((function(e){return e.ok?e.json().then((function(e){return N()(e.artist)})):new Promise((function(e){return e(null)}))}))},y.getSeriesById=function(e){var t="".concat(b,"/series/").concat(e);return fetch(t).then((function(e){return e.ok?e.json().then((function(e){return N()(e.series)})):new Promise((function(e){return e(null)}))}))},y.getIssues=function(e){var t="".concat(b,"/series/").concat(e,"/issues");return fetch(t).then((function(e){return e.ok?e.json().then((function(e){return e.issues.map((function(e){return N()(e)}))})):new Promise((function(e){return e([])}))}))},y.createIssue=function(e,t){var s="".concat(b,"/series/").concat(t,"/issues"),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:e})};return fetch(s,a).then((function(e){return e.ok?e.json().then((function(e){return N()(e.issue)})):new Promise((function(e){return e(null)}))}))},y.updateIssue=function(e,t){var s="".concat(b,"/series/").concat(t,"/issues/").concat(e.id),a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:e})};return fetch(s,a).then((function(e){return e.ok?e.json().then((function(e){return N()(e.issue)})):new Promise((function(e){return e(null)}))}))},y.deleteIssue=function(e,t){var s="".concat(b,"/series/").concat(t,"/issues/").concat(e);return fetch(s,{method:"DELETE"})};var O=y,g=function(e){function t(e){var s;return Object(u.a)(this,t),(s=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={artist:null,mode:"view"},s.updateName=s.updateName.bind(Object(f.a)(s)),s.updateDob=s.updateDob.bind(Object(f.a)(s)),s.updateBiography=s.updateBiography.bind(Object(f.a)(s)),s.saveArtist=s.saveArtist.bind(Object(f.a)(s)),s.cancelEdit=s.cancelEdit.bind(Object(f.a)(s)),s.deleteArtist=s.deleteArtist.bind(Object(f.a)(s)),s.restoreArtist=s.restoreArtist.bind(Object(f.a)(s)),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if("new"!==this.props.match.params.id)O.getArtist(this.props.match.params.id).then((function(t){t&&e.setState({artist:t,savedArtist:JSON.parse(JSON.stringify(t))})}));else{var t={name:"",dateOfBirth:"",biography:"",isCurrentlyEmployed:1};this.setState({artist:t,savedArtist:JSON.parse(JSON.stringify(t))})}}},{key:"hasAllRequiredFields",value:function(){var e=this.state.artist;return!!(e.name&&e.dateOfBirth&&e.biography)}},{key:"hasChanges",value:function(){var e=this.state.artist,t=this.state.savedArtist;return!!t&&(e.name!==t.name||e.dateOfBirth!==t.dateOfBirth||e.biography!==t.biography)}},{key:"updateName",value:function(e){var t=JSON.parse(JSON.stringify(this.state.artist));t.name=e.target.value,this.setState({artist:t})}},{key:"updateDob",value:function(e){var t=JSON.parse(JSON.stringify(this.state.artist));t.dateOfBirth=e.target.value,this.setState({artist:t})}},{key:"updateBiography",value:function(e){var t=JSON.parse(JSON.stringify(this.state.artist));t.biography=e.target.value,this.setState({artist:t})}},{key:"saveArtist",value:function(){var e=this;this.state.artist.id?O.updateArtist(this.state.artist).then((function(t){e.setState({artist:t,savedArtist:JSON.parse(JSON.stringify(t))})})):O.createArtist(this.state.artist).then((function(t){e.props.history.push("/artists/".concat(t.id)),e.setState({artist:t,savedArtist:JSON.parse(JSON.stringify(t))})}))}},{key:"cancelEdit",value:function(){this.setState({artist:JSON.parse(JSON.stringify(this.state.savedArtist))})}},{key:"restoreArtist",value:function(){var e=this;O.restoreArtist(this.state.savedArtist).then((function(t){var s=JSON.parse(JSON.stringify(e.state.artist));s.isCurrentlyEmployed=t.isCurrentlyEmployed,e.setState({artist:s,savedArtist:t})}))}},{key:"deleteArtist",value:function(){var e=this;O.deleteArtist(this.state.artist.id).then((function(t){var s=JSON.parse(JSON.stringify(e.state.artist));s.isCurrentlyEmployed=t.isCurrentlyEmployed,e.setState({artist:s,savedArtist:s})}))}},{key:"renderRetired",value:function(){return this.state.artist.isCurrentlyEmployed?"":n.a.createElement("h2",{className:"retired"},"Retired")}},{key:"renderButtons",value:function(){var e,t,s,a=this.state.artist;return e=this.hasChanges()&&this.hasAllRequiredFields()?n.a.createElement("a",{className:"button",onClick:this.saveArtist},"Save"):n.a.createElement("a",{className:"button inactive"},"Save"),t=this.hasChanges()?n.a.createElement("a",{className:"button",onClick:this.cancelEdit},"Cancel"):n.a.createElement("a",{className:"button inactive"},"Cancel"),s=a.isCurrentlyEmployed&&a.id?n.a.createElement("a",{className:"button delete",onClick:this.deleteArtist},"Delete"):a.id?n.a.createElement("a",{className:"button",onClick:this.restoreArtist},"Restore"):"",n.a.createElement("div",{className:"buttons"},e,t,s)}},{key:"render",value:function(){if(!this.state.artist)return n.a.createElement("div",{className:"Artist"});var e=this.state.artist;return n.a.createElement("div",{className:"Artist"},n.a.createElement("div",{className:"description"},this.renderRetired(),n.a.createElement("h2",null,"Name: ",n.a.createElement("input",{onChange:this.updateName,value:e.name})),n.a.createElement("h3",null,"DOB: ",n.a.createElement("input",{onChange:this.updateDob,value:e.dateOfBirth})),n.a.createElement("div",{className:"divider"}),n.a.createElement("h3",null,"Biography:"),n.a.createElement("textarea",{onChange:this.updateBiography,value:e.biography})),this.renderButtons())}}]),t}(a.Component),E=Object(v.a)(g),I=s(94),k=s.n(I),J=function(e){function t(e){var s;return Object(u.a)(this,t),(s=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={artists:[],series:[]},s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.getSeries().then((function(t){if(t.length){var s=e.sortItemNames(t);e.setState({series:s})}})),O.getArtists().then((function(t){if(t.length){var s=e.sortItemNames(t);e.setState({artists:s})}}))}},{key:"sortItemNames",value:function(e){return e.sort((function(e,t){return t.name.toLowerCase()<e.name.toLowerCase()?1:-1}))}},{key:"renderSeries",value:function(){return this.state.series.map((function(e){return n.a.createElement(m.a,{to:"/series/".concat(e.id),className:"item",style:{backgroundColor:k()()},key:e.id},n.a.createElement("h3",null,e.name))}))}},{key:"renderArtists",value:function(){return this.state.artists.map((function(e){return n.a.createElement(m.a,{to:"/artists/".concat(e.id),className:"item",key:e.id},n.a.createElement("h3",null,e.name),n.a.createElement("img",{src:"public/img/artist.svg",alt:""}))}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"Landing"},n.a.createElement("h2",null,"CHOOSE A SERIES"),n.a.createElement("div",{className:"series item-list"},this.renderSeries()),n.a.createElement(m.a,{to:"/series/new",className:"button"},"ADD"),n.a.createElement("h2",null,"ARTISTS"),n.a.createElement("div",{className:"artist item-list"},this.renderArtists()),n.a.createElement(m.a,{to:"/artists/new",className:"button"},"ADD"))}}]),t}(a.Component),j=function(e){function t(e){var s;return Object(u.a)(this,t),(s=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={series:null,issues:[],artists:{}},s.updateSeriesName=s.updateSeriesName.bind(Object(f.a)(s)),s.updateSeriesDescription=s.updateSeriesDescription.bind(Object(f.a)(s)),s.updateIssueName=s.updateIssueName.bind(Object(f.a)(s)),s.updateIssueNumber=s.updateIssueNumber.bind(Object(f.a)(s)),s.updateIssueDate=s.updateIssueDate.bind(Object(f.a)(s)),s.updateIssueArtist=s.updateIssueArtist.bind(Object(f.a)(s)),s.saveSeries=s.saveSeries.bind(Object(f.a)(s)),s.cancelSeriesEdit=s.cancelSeriesEdit.bind(Object(f.a)(s)),s.deleteSeries=s.deleteSeries.bind(Object(f.a)(s)),s.addIssue=s.addIssue.bind(Object(f.a)(s)),s.saveIssue=s.saveIssue.bind(Object(f.a)(s)),s.cancelIssueEdit=s.cancelIssueEdit.bind(Object(f.a)(s)),s.deleteIssue=s.deleteIssue.bind(Object(f.a)(s)),s}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if("new"!==this.props.match.params.id)O.getSeriesById(this.props.match.params.id).then((function(t){t&&e.setState({series:t,savedSeries:JSON.parse(JSON.stringify(t))})})),this.initializeIssues();else{var t={name:"",description:""};this.setState({series:t,savedSeries:JSON.parse(JSON.stringify(t))})}}},{key:"initializeIssues",value:function(){var e=this;O.getIssues(this.props.match.params.id).then((function(t){var s=e.sortIssues(t);e.setState({issues:s,savedIssues:JSON.parse(JSON.stringify(s))})})),O.getArtists().then((function(t){if(t){var s={};t.forEach((function(e){return s[e.id]=e.name})),e.setState({artists:s})}}))}},{key:"sortIssues",value:function(e){return e.sort((function(e,t){return e.issueNumber<t.issueNumber?-1:1}))}},{key:"seriesHasChanges",value:function(){var e=this.state.series,t=this.state.savedSeries;return!!t&&(e.name!==t.name||e.description!==t.description)}},{key:"seriesHasAllRequiredFields",value:function(){return!!this.state.series.name&&!!this.state.series.description}},{key:"issueHasChanges",value:function(e,t){var s=this.state.savedIssues[t];return!e.id||!!s&&(e.name!==s.name||e.issueNumber!==s.issueNumber||e.publicationDate!==s.publicationDate||e.artistId!==s.artistId)}},{key:"issueHasAllRequiredFields",value:function(e){return!!e.name&&!!e.issueNumber&&!!e.publicationDate&&e.artistId}},{key:"updateSeriesName",value:function(e){var t=JSON.parse(JSON.stringify(this.state.series));t.name=e.target.value,this.setState({series:t})}},{key:"updateSeriesDescription",value:function(e){var t=JSON.parse(JSON.stringify(this.state.series));t.description=e.target.value,this.setState({series:t})}},{key:"updateIssueName",value:function(e,t){var s=JSON.parse(JSON.stringify(this.state.issues));s[t].name=e.target.value,this.setState({issues:s})}},{key:"updateIssueNumber",value:function(e,t){var s=JSON.parse(JSON.stringify(this.state.issues));s[t].issueNumber=e.target.value,this.setState({issues:s})}},{key:"updateIssueDate",value:function(e,t){var s=JSON.parse(JSON.stringify(this.state.issues));s[t].publicationDate=e.target.value,this.setState({issues:s})}},{key:"updateIssueArtist",value:function(e,t){var s=JSON.parse(JSON.stringify(this.state.issues));s[t].artistId=e.target.value,this.setState({issues:s})}},{key:"saveSeries",value:function(){var e=this;this.state.series.id?O.updateSeries(this.state.series).then((function(t){e.setState({series:t,savedSeries:JSON.parse(JSON.stringify(t))})})):O.createSeries(this.state.series).then((function(t){e.props.history.push("/series/".concat(t.id)),e.setState({series:t,savedSeries:JSON.parse(JSON.stringify(t))}),e.initializeIssues()}))}},{key:"cancelSeriesEdit",value:function(){this.setState({series:JSON.parse(JSON.stringify(this.state.savedSeries))})}},{key:"deleteSeries",value:function(){var e=this;O.deleteSeries(this.state.series.id).then((function(){e.props.history.push("/")}))}},{key:"addIssue",value:function(){var e={name:"",issueNumber:"",publicationDate:"",artistId:Object.keys(this.state.artists)[0]},t=JSON.parse(JSON.stringify(this.state.issues));t.push(e);var s=JSON.parse(JSON.stringify(this.state.savedIssues));s.push(e),this.setState({issues:t,savedIssues:s})}},{key:"saveIssue",value:function(e){var t=this;this.state.issues[e].id?O.updateIssue(this.state.issues[e],this.state.series.id).then((function(s){var a=JSON.parse(JSON.stringify(t.state.issues));a.splice(e,1,s);var n=JSON.parse(JSON.stringify(t.state.savedIssues));n.splice(e,1,s),a=t.sortIssues(a),n=t.sortIssues(n),t.setState({issues:a,savedIssues:JSON.parse(JSON.stringify(a))})})):O.createIssue(this.state.issues[e],this.state.series.id).then((function(s){var a=JSON.parse(JSON.stringify(t.state.issues));a.splice(e,1,s);var n=JSON.parse(JSON.stringify(t.state.savedIssues));n.splice(e,1,s),a=t.sortIssues(a),n=t.sortIssues(n),t.setState({issues:a,savedIssues:n})}))}},{key:"cancelIssueEdit",value:function(e){var t=JSON.parse(JSON.stringify(this.state.issues)),s=t[e];s.id?(t[e]=JSON.parse(JSON.stringify(this.state.savedIssues[e])),this.setState({issues:t})):this.deleteIssue(s,e)}},{key:"deleteIssue",value:function(e,t){var s=this;O.deleteIssue(e.id,this.state.series.id).then((function(){var e=JSON.parse(JSON.stringify(s.state.issues));e.splice(t,1);var a=JSON.parse(JSON.stringify(s.state.savedIssues));a.splice(t,1),s.setState({issues:e,savedIssues:a})}))}},{key:"generateArtistOptions",value:function(){var e=this.state.artists,t=[];for(var s in e)t.push(n.a.createElement("option",{key:e[s],value:s},e[s]));return t}},{key:"renderSeriesButtons",value:function(){var e,t,s;this.state.series;return e=this.seriesHasChanges()&&this.seriesHasAllRequiredFields()?n.a.createElement("a",{className:"button",onClick:this.saveSeries},"Save"):n.a.createElement("a",{className:"button inactive"},"Save"),t=this.seriesHasChanges()?n.a.createElement("a",{className:"button",onClick:this.cancelSeriesEdit},"Cancel"):n.a.createElement("a",{className:"button inactive"},"Cancel"),s=this.state.issues.length?"":n.a.createElement("a",{className:"button delete",onClick:this.deleteSeries},"Delete"),n.a.createElement("div",{className:"buttons"},e,t,s)}},{key:"renderIssueButtons",value:function(e,t){var s,a,i;return s=this.issueHasChanges(e,t)&&this.issueHasAllRequiredFields(e)?n.a.createElement("a",{className:"button",onClick:this.saveIssue.bind(this,t)},"Save"):n.a.createElement("a",{className:"button inactive"},"Save"),a=this.issueHasChanges(e,t)?n.a.createElement("a",{className:"button",onClick:this.cancelIssueEdit.bind(this,t)},"Cancel"):n.a.createElement("a",{className:"button inactive"},"Cancel"),i=n.a.createElement("a",{className:"button delete",onClick:this.deleteIssue.bind(this,e,t)},"Delete"),n.a.createElement("div",{className:"buttons"},s,a,i)}},{key:"renderIssues",value:function(){var e=this;if("new"===this.props.match.params.id)return"";var t=this.state.issues.map((function(t,s){return n.a.createElement("div",{className:"issue",key:t.id},n.a.createElement("h3",null,"Name: ",n.a.createElement("input",{onChange:function(t){return e.updateIssueName(t,s)},value:t.name})),n.a.createElement("p",null,"Issue # ",n.a.createElement("input",{type:"number",onChange:function(t){return e.updateIssueNumber(t,s)},value:t.issueNumber})),n.a.createElement("p",null,"Date: ",n.a.createElement("input",{onChange:function(t){return e.updateIssueDate(t,s)},value:t.publicationDate})),n.a.createElement("p",null,"Artist: ",n.a.createElement("select",{onChange:function(t){return e.updateIssueArtist(t,s)},value:t.artistId},e.generateArtistOptions())),e.renderIssueButtons(t,s))}));return n.a.createElement("div",{className:"issue-container"},n.a.createElement("div",{className:"issues"},t),n.a.createElement("a",{className:"button",onClick:this.addIssue},"Add Issue"))}},{key:"render",value:function(){if(!this.state.series)return n.a.createElement("div",{className:"Series"});var e=this.state.series;return n.a.createElement("div",{className:"Series"},n.a.createElement("div",{className:"description"},n.a.createElement("input",{onChange:this.updateSeriesName,value:e.name,placeholder:"Series Title"}),n.a.createElement("h3",null,"Description"),n.a.createElement("textarea",{onChange:this.updateSeriesDescription,value:e.description}),this.renderSeriesButtons()),this.renderIssues())}}]),t}(a.Component),C=Object(v.a)(j),A=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(h.a,null,n.a.createElement("div",{className:"App"},n.a.createElement("header",null,n.a.createElement(m.a,{to:"/",className:"logo"},n.a.createElement("img",{src:"./img/logo.svg",alt:"logo",className:"desktop"}),n.a.createElement("img",{src:"./img/logo-mobile.svg",alt:"logo",className:"mobile"}))),n.a.createElement(p.a,{exact:!0,path:"/",component:J}),n.a.createElement(p.a,{path:"/artists/:id",component:E}),n.a.createElement(p.a,{path:"/series/:id",component:C})))}}]),t}(a.Component);r.a.render(n.a.createElement(A,null),document.getElementById("root"))},9:function(e,t,s){"use strict";var a=s(188),n=s(189);e.exports=function(e,t){var s=(t=Object.assign({deep:!1},t)).exclude;return a(e,(function(e,t){s&&function(e,t){return e.some((function(e){return"string"===typeof e?e===t:e.test(t)}))}(s,e)||(e=n(e));return[e,t]}),{deep:t.deep})}},95:function(e,t,s){e.exports=s(197)}},[[95,1,2]]]);
//# sourceMappingURL=main.571ace14.chunk.js.map
